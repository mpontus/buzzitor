self.addEventListener('push', function(event) {
  console.log("Received notification!");
  var data = event.data.json();
  options = {
    body: data.body
  };
  if (data.hasOwnProperty('icon')) {
    options.icon = data.icon;
  }
  event.waitUntil(
    self.registration.showNotification(data.title, options)
  );
});
